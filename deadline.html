<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deadline Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"> <!-- Include Font Awesome -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/gen.css">
    <style>
        .deadline-container h1 {
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
            color: var(--text-light);
        }
        body.dark-mode span {
            color: var(--text-light);
        }

        .deadline-container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        #deadline-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .deadline-input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        #deadline-time {
            width: 120px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        #add-deadline {
            background-color: var(--primary-color);
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            height: 45px;
            cursor: pointer;
        }

        #add-deadline:hover {
            background-color: #2980b9;
        }

        .deadline-panel {
            max-height: 400px;
            overflow-y: auto;
            border-top: 1px solid #ddd;
            padding-top: 10px;
        }

        #deadline-list {
            list-style: none;
            padding: 0;
        }

        .deadline-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px;
    border-bottom: 1px solid #ddd;
    transition: background-color 0.3s, color 0.3s;
}

        .deadline-item:last-child {
            border-bottom: none;
        }

        .deadline-item.passed {
    background-color: #f8d7da; /* Light red background for passed deadlines */
    color: #721c24; /* Darker text color for visibility */
}
.deadline-item.checked {
    background-color: #d4edda; /* Light green background for checked deadlines */
    color: #155724; /* Darker text color for visibility */
}

       .deadline-item .check-icon,
.deadline-item .trash-icon {
    color: #28a745; /* Green check icon color */
    cursor: pointer;
    margin-left: 10px;
}

.deadline-item .check-icon {
    margin-left: auto; /* Align check icon to the right */
}

.deadline-item .trash-icon {
    color: #dc3545; /* Red trash icon color */
}

.deadline-item .trash-icon:hover {
    color: #c82333;
}

        .deadline-item .deadline-time {
            margin-left: 10px;
        }
        input[type="text"],
input[type="date"],
input[type="time"] {
    flex: 1;
    opacity: 0.7;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    box-sizing: border-box; /* Ensure padding doesn't affect width */
    font-size: 16px; /* Ensure text size is consistent */
}

/* Specific styles for date input */
input[type="date"] {
    width: 160px; /* Adjust width as needed */
    appearance: none; /* Remove default styling */
}

/* Specific styles for time input */
input[type="time"] {
    width: 120px; /* Adjust width as needed */
    appearance: none; /* Remove default styling */
}

/* Ensure inputs are displayed consistently */
input[type="text"],
input[type="date"],
input[type="time"] {
    opacity: 0.7;
    display: block;
    margin-bottom: 20px; /* Add spacing if needed */
}
    </style>
</head>
<body>
    <header>
        <img src="img/logo.svg" alt="Forge by Blacnova Icon" onclick="redirectToHome()">
        <button id="theme-toggle">
            <img id="theme-icon" src="img/light.svg" alt="Light Mode Icon">
        </button>
    </header>

    <main>
        <section id="introduction">
            <div class="intro-container">
                <h2>Deadlines</h2>
                <p>Track your deadlines and stay organized.</p>
            </div>
        </section>
        <div class="deadline-container">
            <h1>Deadline Tracker</h1>
            <div class="deadline-input-container">
                <input type="text" id="deadline-input" placeholder="Enter a new deadline...">
                <input type="date" id="deadline-date">
                <input type="time" id="deadline-time">
                <button id="add-deadline"><i class="fas fa-plus"></i> Add</button>
            </div>
            <div class="deadline-panel">
                <ul id="deadline-list"></ul>
            </div>
        </div>
    </main>
    <section id="footerprint">
        <p>Thanks for choosing Blacnova's Forge!</p>
    </section>
    <footer>
        <p>&copy; 2024 Forge by <a href="https://blacnova.store" target="_blank">Blacnova</a>. All rights reserved.</p>
    </footer>
    <script src="js/script.js"></script>
    <script>
        function redirectToHome() {
            window.location.href = "index.html";
        }
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
    const deadlineInput = document.getElementById('deadline-input');
    const deadlineDate = document.getElementById('deadline-date');
    const deadlineTime = document.getElementById('deadline-time');
    const addDeadlineButton = document.getElementById('add-deadline');
    const deadlineList = document.getElementById('deadline-list');

    // Load deadlines from localStorage and parse date objects
    let deadlines = JSON.parse(localStorage.getItem('deadlines')) || [];
    deadlines = deadlines.map(d => ({
        ...d,
        dateObj: new Date(d.dateObj), // Ensure dateObj is a Date object
        checked: d.checked || false // Default state for checked deadlines
    }));

    addDeadlineButton.addEventListener('click', addDeadline);
    deadlineInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') addDeadline();
    });

    function addDeadline() {
        const deadlineText = deadlineInput.value.trim();
        const deadlineDateValue = deadlineDate.value;
        const deadlineTimeValue = deadlineTime.value;

        if (deadlineText === '' || deadlineDateValue === '') return;

        const deadlineDateTime = `${deadlineDateValue}T${deadlineTimeValue}`;
        const deadlineDateObj = new Date(deadlineDateTime);

        // Create a deadline object
        const deadline = {
            text: deadlineText,
            date: deadlineDateTime,
            dateObj: deadlineDateObj,
            checked: false // Default state for new deadlines
        };

        deadlines.push(deadline);
        saveDeadlines(); // Save to localStorage
        updateDeadlineList();
        deadlineInput.value = '';
        deadlineDate.value = ''; // Clear date input
        deadlineTime.value = ''; // Clear time input
    }

    function updateDeadlineList() {
        deadlineList.innerHTML = ''; // Clear the list

        // Sort deadlines by date
        deadlines.sort((a, b) => a.dateObj - b.dateObj);

        // Create and append list items
        deadlines.forEach(deadline => {
            const deadlineItem = document.createElement('li');
            deadlineItem.classList.add('deadline-item');
            const now = new Date();
            const isPassed = deadline.dateObj < now;

            deadlineItem.innerHTML = `
                <span>${deadline.text}</span>
                ${deadline.date ? `<span class="deadline-time">${formatDate(deadline.dateObj)}</span>` : ''}
                <i class="fas fa-check check-icon"></i>
                <i class="fas fa-trash-alt trash-icon"></i>
            `;

            // Apply passed and checked styles
            if (isPassed) {
                deadlineItem.classList.add('passed');
            }
            if (deadline.checked) {
                deadlineItem.classList.add('checked');
            }

            // Toggle the checked state
            deadlineItem.querySelector('.check-icon').addEventListener('click', () => {
                deadline.checked = !deadline.checked;
                deadlineItem.classList.toggle('checked', deadline.checked);
                saveDeadlines(); // Save updated state to localStorage
            });

            // Remove the item
            deadlineItem.querySelector('.trash-icon').addEventListener('click', () => {
                deadlines = deadlines.filter(d => d !== deadline); // Remove deadline from array
                saveDeadlines(); // Save updated list to localStorage
                updateDeadlineList(); // Update the list
            });

            deadlineList.appendChild(deadlineItem);
        });
    }

    function saveDeadlines() {
        // Convert deadlines to a format that can be saved in localStorage
        const deadlinesToSave = deadlines.map(d => ({
            ...d,
            dateObj: d.dateObj.toISOString(), // Convert dateObj to a string
            checked: d.checked // Save the checked state
        }));
        localStorage.setItem('deadlines', JSON.stringify(deadlinesToSave));
    }

    function formatDate(dateObj) {
        const options = { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' };
        return dateObj.toLocaleDateString('en-US', options);
    }

    // Initial load
    updateDeadlineList();
});



    </script>
</body>
</html>
